import os

def create_malware_domains():
    phishing_file = "PhishingDomains.txt"
    domains_file = "Domains.txt"
    malware_output_file = "MalwareDomains.txt"

    # Check if phishing file exists
    if os.path.exists(phishing_file):
        # Read phishing domains into a set (with utf-8 encoding to avoid encoding errors)
        with open(phishing_file, "r", encoding="utf-8") as file:
            phishing_domains = set(line.strip() for line in file if line.strip())

        # Read domains into a set (with utf-8 encoding to avoid encoding errors)
        with open(domains_file, "r", encoding="utf-8") as file:
            domains = set(line.strip() for line in file if line.strip())

        # Subtract phishing domains from domains to get Malware domains
        malware_domains = domains - phishing_domains

        # Write the resulting malware domains to MalwareDomains.txt
        with open(malware_output_file, "w", encoding="utf-8") as file:
            file.write("\n".join(malware_domains))

        print(f"MalwareDomains.txt has been created with {len(malware_domains)} unique domains.")

    else:
        print(f"The file {phishing_file} does not exist. Operation aborted.")

if __name__ == "__main__":
    create_malware_domains()
